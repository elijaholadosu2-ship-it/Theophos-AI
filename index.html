<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theophos AI | Smart Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .chat-box { height: 400px; overflow-y: auto; }
        .ai-msg { background: #f0f0f0; border-radius: 10px; padding: 10px; margin: 5px 0; align-self: flex-start; }
        .user-msg { background: #007bff; color: white; border-radius: 10px; padding: 10px; margin: 5px 0; align-self: flex-end; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">

    <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-6">
        <h1 class="text-2xl font-bold text-center mb-6 text-blue-600">Theophos Smart AI ðŸ¤–</h1>

        <div id="chatDisplay" class="chat-box border p-4 rounded mb-4 flex flex-col">
            <div class="ai-msg">Hello! I am your AI. Ask me anything or tell me what image to create!</div>
        </div>

        <div class="flex gap-2">
            <input type="text" id="userInput" class="flex-1 border p-2 rounded" placeholder="Type a question or image prompt...">
            <button onclick="handleInput('text')" class="bg-blue-600 text-white px-4 py-2 rounded">Ask AI</button>
            <button onclick="handleInput('image')" class="bg-green-600 text-white px-4 py-2 rounded">Create Image</button>
        </div>

        <div id="imageResult" class="mt-6 hidden text-center">
            <h3 class="font-bold mb-2">Generated Image:</h3>
            <img id="generatedImg" src="" class="mx-auto rounded-lg shadow-md max-w-full">
            <a id="downloadBtn" href="" download="ai_image.jpg" class="inline-block mt-2 text-blue-500 underline">Download Image</a>
        </div>
    </div>

    <script>
        async function handleInput(type) {
            const input = document.getElementById('userInput').value;
            if (!input) return alert("Please type something!");

            if (type === 'text') {
                addMessage(input, 'user');
                const response = await fetch(`https://text.pollinations.ai/${encodeURIComponent(input)}`);
                const data = await response.text();
                addMessage(data, 'ai');
            } else {
                document.getElementById('imageResult').classList.remove('hidden');
                const imgUrl = `https://pollinations.ai/p/${encodeURIComponent(input)}?width=1024&height=1024&seed=${Math.floor(Math.random() * 1000)}`;
                document.getElementById('generatedImg').src = imgUrl;
                document.getElementById('downloadBtn').href = imgUrl;
                addMessage("Creating your image below...", 'ai');
            }
            document.getElementById('userInput').value = "";
        }

        function addMessage(text, sender) {
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'user-msg' : 'ai-msg';
            div.innerText = text;
            document.getElementById('chatDisplay').appendChild(div);
            document.getElementById('chatDisplay').scrollTop = document.getElementById('chatDisplay').scrollHeight;
        }
    </script>
</body>
</html>
